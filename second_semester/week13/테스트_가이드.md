# Week 12 API í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

## âœ… êµ¬í˜„ í™•ì¸ ì‚¬í•­

### 1. íŒŒì¼ êµ¬ì¡° í™•ì¸

```
week12/
â”œâ”€â”€ main.py
â”œâ”€â”€ database.py
â”œâ”€â”€ models.py
â”œâ”€â”€ domain/
â”‚   â””â”€â”€ question/
â”‚       â””â”€â”€ question_router.py  âœ… ìƒì„±ë¨
â””â”€â”€ frontend/
```

### 2. êµ¬í˜„ ë‚´ìš© í™•ì¸

-   âœ… `domain/question/question_router.py` ìƒì„±
-   âœ… APIRouter ì‚¬ìš© (prefix='/api/question')
-   âœ… `question_list()` í•¨ìˆ˜ êµ¬í˜„ (GET ë©”ì†Œë“œ)
-   âœ… ORMì„ ì‚¬ìš©í•˜ì—¬ SQLite ë°ì´í„° ì¡°íšŒ
-   âœ… `main.py`ì— `include_router()`ë¡œ ë“±ë¡

## ğŸš€ í…ŒìŠ¤íŠ¸ ë°©ë²•

### ë°©ë²• 1: ì„œë²„ ì‹¤í–‰ ë° Swagger UI í™•ì¸ (ê¶Œì¥)

#### 1ë‹¨ê³„: ì„œë²„ ì‹¤í–‰

```bash
cd /Users/kyeongbin/codyssey/ia-codyssey/second_semester/week12
source venv/bin/activate
python3 -m uvicorn main:app --reload
```

ì„œë²„ê°€ ì‹¤í–‰ë˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ë©”ì‹œì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤:

```
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process
INFO:     Started server process
INFO:     Waiting for application startup.
INFO:     Application startup complete.
```

#### 2ë‹¨ê³„: Swagger UIì—ì„œ í™•ì¸

ë¸Œë¼ìš°ì €ì—ì„œ ë‹¤ìŒ ì£¼ì†Œë¡œ ì ‘ì†:

-   **http://localhost:8000/docs**

Swagger UIì—ì„œ ë‹¤ìŒì„ í™•ì¸:

1. **API ëª©ë¡ í™•ì¸**

    - `GET /api/question/` ì—”ë“œí¬ì¸íŠ¸ê°€ ë³´ì´ëŠ”ì§€ í™•ì¸
    - "question" íƒœê·¸ë¡œ ê·¸ë£¹í™”ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸

2. **API í…ŒìŠ¤íŠ¸**
    - `GET /api/question/` í´ë¦­
    - "Try it out" ë²„íŠ¼ í´ë¦­
    - "Execute" ë²„íŠ¼ í´ë¦­
    - ì‘ë‹µ ê²°ê³¼ í™•ì¸

#### 3ë‹¨ê³„: ì‘ë‹µ í™•ì¸

**ì„±ê³µ ì‘ë‹µ ì˜ˆì‹œ:**

```json
[
    {
        "id": 1,
        "subject": "ì§ˆë¬¸ ì œëª©",
        "content": "ì§ˆë¬¸ ë‚´ìš©",
        "create_date": "2025-09-15T12:00:00"
    }
]
```

**ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš°:**

```json
[]
```

### ë°©ë²• 2: curlë¡œ ì§ì ‘ í…ŒìŠ¤íŠ¸

ìƒˆ í„°ë¯¸ë„ ì°½ì„ ì—´ê³ :

```bash
# ì§ˆë¬¸ ëª©ë¡ ì¡°íšŒ
curl http://localhost:8000/api/question/

# JSON í˜•ì‹ìœ¼ë¡œ ë³´ê¸°
curl http://localhost:8000/api/question/ | python3 -m json.tool
```

### ë°©ë²• 3: ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ í™•ì¸

ë¸Œë¼ìš°ì € ì£¼ì†Œì°½ì— ì…ë ¥:

-   **http://localhost:8000/api/question/**

JSON í˜•ì‹ìœ¼ë¡œ ì‘ë‹µì´ í‘œì‹œë©ë‹ˆë‹¤.

## ğŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ê¸°ë³¸ ìš”êµ¬ì‚¬í•­ í™•ì¸

-   [ ] `question_router.py` íŒŒì¼ì´ `domain/question/` í´ë”ì— ìƒì„±ë¨
-   [ ] APIRouterë¥¼ ì‚¬ìš©í•˜ì—¬ ë¼ìš°í„° ìƒì„±
-   [ ] prefixê°€ `/api/question`ìœ¼ë¡œ ì„¤ì •ë¨
-   [ ] `question_list()` í•¨ìˆ˜ê°€ êµ¬í˜„ë¨
-   [ ] GET ë©”ì†Œë“œ ì‚¬ìš©
-   [ ] ORMì„ ì‚¬ìš©í•˜ì—¬ ë°ì´í„° ì¡°íšŒ (`db.query(Question).all()`)
-   [ ] `main.py`ì— `include_router()`ë¡œ ë“±ë¡ë¨

### ë™ì‘ í™•ì¸

-   [ ] ì„œë²„ê°€ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë¨
-   [ ] http://localhost:8000/docs ì—ì„œ `GET /api/question/` ì—”ë“œí¬ì¸íŠ¸ê°€ ë³´ì„
-   [ ] Swagger UIì—ì„œ "Try it out"ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ì„±ê³µ
-   [ ] ì‘ë‹µì´ JSON í˜•ì‹ìœ¼ë¡œ ë°˜í™˜ë¨
-   [ ] ë°ì´í„°ë² ì´ìŠ¤ì— ë°ì´í„°ê°€ ìˆìœ¼ë©´ ëª©ë¡ì´ ë°˜í™˜ë¨
-   [ ] ë°ì´í„°ë² ì´ìŠ¤ì— ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ë¹ˆ ë°°ì—´ `[]` ë°˜í™˜ë¨

### PEP 8 ìŠ¤íƒ€ì¼ í™•ì¸

-   [ ] í•¨ìˆ˜ëª…: `snake_case` (question_list)
-   [ ] í´ë˜ìŠ¤ëª…: `CapWords` (QuestionResponse)
-   [ ] ë¬¸ìì—´: ì‘ì€ë”°ì˜´í‘œ ì‚¬ìš©
-   [ ] ë“¤ì—¬ì“°ê¸°: ê³µë°± 4ì¹¸

## ğŸ› ë¬¸ì œ í•´ê²°

### ë¬¸ì œ 1: Import ì˜¤ë¥˜

**ì¦ìƒ:**

```
ModuleNotFoundError: No module named 'fastapi'
```

**í•´ê²°:**

```bash
source venv/bin/activate
pip install -r requirements.txt
```

### ë¬¸ì œ 2: ë°ì´í„°ë² ì´ìŠ¤ ì˜¤ë¥˜

**ì¦ìƒ:**

```
sqlalchemy.exc.OperationalError: no such table: question
```

**í•´ê²°:**
ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰:

```bash
cd /Users/kyeongbin/codyssey/ia-codyssey/second_semester/week12
source venv/bin/activate
alembic upgrade head
```

ë˜ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”:

```bash
python3 -c "from database import engine, Base; from models import Question; Base.metadata.create_all(bind=engine)"
```

### ë¬¸ì œ 3: í¬íŠ¸ê°€ ì´ë¯¸ ì‚¬ìš© ì¤‘

**ì¦ìƒ:**

```
ERROR: [Errno 48] Address already in use
```

**í•´ê²°:**
ë‹¤ë¥¸ í¬íŠ¸ ì‚¬ìš©:

```bash
uvicorn main:app --reload --port 8001
```

ë˜ëŠ” ê¸°ì¡´ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ:

```bash
lsof -ti:8000 | xargs kill -9
```

## ğŸ¯ ë³´ë„ˆìŠ¤ ê³¼ì œ í™•ì¸

1. **Swagger UI ì ‘ì†**

    - http://localhost:8000/docs

2. **ì§ˆë¬¸ ëª©ë¡ API í™•ì¸**

    - `GET /api/question/` ì—”ë“œí¬ì¸íŠ¸ ì°¾ê¸°
    - "Try it out" í´ë¦­
    - "Execute" í´ë¦­
    - ì‘ë‹µ ê²°ê³¼ í™•ì¸

3. **ì •ìƒ ë™ì‘ í™•ì¸**
    - âœ… 200 OK ì‘ë‹µ
    - âœ… JSON í˜•ì‹ ì‘ë‹µ
    - âœ… ë°ì´í„°ë² ì´ìŠ¤ ë°ì´í„° ë°˜í™˜ (ë˜ëŠ” ë¹ˆ ë°°ì—´)

## ğŸ“ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ê¸°ë¡

í…ŒìŠ¤íŠ¸ ë‚ ì§œ: ******\_\_\_******

-   [ ] ì„œë²„ ì‹¤í–‰ ì„±ê³µ
-   [ ] Swagger UI ì ‘ì† ì„±ê³µ
-   [ ] API ì—”ë“œí¬ì¸íŠ¸ í™•ì¸ë¨
-   [ ] API í…ŒìŠ¤íŠ¸ ì„±ê³µ
-   [ ] ì‘ë‹µ í˜•ì‹ ì •ìƒ
-   [ ] PEP 8 ìŠ¤íƒ€ì¼ ì¤€ìˆ˜ í™•ì¸

**ì°¸ê³ ì‚¬í•­:**

---

---


# Week 14 ì‹œì—° ê°€ì´ë“œ

## ğŸš€ ì‹œì—° ìˆœì„œ

### 1ë‹¨ê³„: ì„œë²„ ì‹¤í–‰ (í„°ë¯¸ë„ 1)

```bash
cd /Users/kyeongbin/codyssey/ia-codyssey/second_semester/week14
source venv/bin/activate
uvicorn main:app --reload
```

**í™•ì¸:** ì„œë²„ê°€ `http://localhost:8000`ì—ì„œ ì‹¤í–‰ë˜ëŠ”ì§€ í™•ì¸

```bash
curl http://localhost:8000/
# ì‘ë‹µ: {"message":"ê²Œì‹œíŒ API"}
```

---

### 2ë‹¨ê³„: í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰

**ë°©ë²• 1: FastAPI ì •ì  íŒŒì¼ ì„œë¹™ (ê¶Œì¥, ê°€ì¥ ê°„ë‹¨)**

ì„œë²„ë¥¼ ì‹¤í–‰í•˜ë©´ ìë™ìœ¼ë¡œ í”„ë¡ íŠ¸ì—”ë“œë„ í•¨ê»˜ ì„œë¹™ë©ë‹ˆë‹¤.

ë¸Œë¼ìš°ì €ì—ì„œ `http://localhost:8000/static/index.html` ì ‘ì†

ë˜ëŠ” `main.py`ì— ë£¨íŠ¸ ê²½ë¡œë¥¼ ì¶”ê°€í•˜ì—¬ `http://localhost:8000/`ì—ì„œ ë°”ë¡œ ì ‘ì† ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ë°©ë²• 2: Python HTTP ì„œë²„ ì‚¬ìš©**

```bash
cd /Users/kyeongbin/codyssey/ia-codyssey/second_semester/week14/frontend
python3 -m http.server 8080
```

ë¸Œë¼ìš°ì €ì—ì„œ `http://localhost:8080` ì ‘ì†

**í¬íŠ¸ ì¶©ëŒ ë°œìƒ ì‹œ:**

```bash
# í¬íŠ¸ë¥¼ ì‚¬ìš© ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ í™•ì¸ ë° ì¢…ë£Œ
lsof -ti:8080 | xargs kill -9

# ë˜ëŠ” ë‹¤ë¥¸ í¬íŠ¸ ì‚¬ìš©
python3 -m http.server 8081
```

**ë°©ë²• 3: ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ ì—´ê¸°**

```bash
# macOS
open /Users/kyeongbin/codyssey/ia-codyssey/second_semester/week14/frontend/index.html

# Linux
xdg-open /Users/kyeongbin/codyssey/ia-codyssey/second_semester/week14/frontend/index.html

# Windows
start /Users/kyeongbin/codyssey/ia-codyssey/second_semester/week14/frontend/index.html
```

**ì£¼ì˜:** ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ ì—´ ê²½ìš° CORS ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê²½ìš° ë°©ë²• 1 ë˜ëŠ” 2ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.

---

### 3ë‹¨ê³„: API í…ŒìŠ¤íŠ¸

**ë°©ë²• 1: Swagger UI (ê¶Œì¥)**

-   ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:8000/docs ì ‘ì†
-   `POST /api/question/` í´ë¦­
-   "Try it out" â†’ Request body ì…ë ¥ â†’ "Execute"
-   ì‘ë‹µ í™•ì¸

**ë°©ë²• 2: curl**

```bash
# ì§ˆë¬¸ ë“±ë¡
curl -X POST http://localhost:8000/api/question/ \
  -H "Content-Type: application/json" \
  -d '{"subject": "í…ŒìŠ¤íŠ¸ ì§ˆë¬¸", "content": "ì§ˆë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤."}' | python3 -m json.tool

# ì§ˆë¬¸ ëª©ë¡ ì¡°íšŒ
curl http://localhost:8000/api/question/ | python3 -m json.tool
```

**ë°©ë²• 3: í”„ë¡ íŠ¸ì—”ë“œ ì‚¬ìš©**

-   ë¸Œë¼ìš°ì €ì—ì„œ í”„ë¡ íŠ¸ì—”ë“œ í˜ì´ì§€ ì ‘ì†
-   ì œëª©ê³¼ ë‚´ìš©ì„ ì…ë ¥í•˜ê³  "ì§ˆë¬¸ ë“±ë¡" ë²„íŠ¼ í´ë¦­
-   ë“±ë¡ëœ ì§ˆë¬¸ì´ ëª©ë¡ì— í‘œì‹œë˜ëŠ”ì§€ í™•ì¸

---

### 4ë‹¨ê³„: ë¹ˆ ê°’ ê²€ì¦ í…ŒìŠ¤íŠ¸

**curlë¡œ í…ŒìŠ¤íŠ¸:**

```bash
# ì œëª©ì´ ë¹ˆ ë¬¸ìì—´ì¸ ê²½ìš°
curl -X POST http://localhost:8000/api/question/ \
  -H "Content-Type: application/json" \
  -d '{"subject": "", "content": "ë‚´ìš©ì´ ìˆìŠµë‹ˆë‹¤"}'

# ì‘ë‹µ: {"detail":[{"type":"string_too_short","loc":["body","subject"],...}]}

# ë‚´ìš©ì´ ë¹ˆ ë¬¸ìì—´ì¸ ê²½ìš°
curl -X POST http://localhost:8000/api/question/ \
  -H "Content-Type: application/json" \
  -d '{"subject": "ì œëª©ì´ ìˆìŠµë‹ˆë‹¤", "content": ""}'

# ì‘ë‹µ: {"detail":[{"type":"string_too_short","loc":["body","content"],...}]}
```

**í”„ë¡ íŠ¸ì—”ë“œë¡œ í…ŒìŠ¤íŠ¸:**

-   ì œëª© ë˜ëŠ” ë‚´ìš©ì„ ë¹„ìš°ê³  "ì§ˆë¬¸ ë“±ë¡" ë²„íŠ¼ í´ë¦­
-   ë¸Œë¼ìš°ì €ì˜ ê°œë°œì ë„êµ¬(F12)ì—ì„œ ë„¤íŠ¸ì›Œí¬ íƒ­ í™•ì¸
-   422 Unprocessable Entity ì˜¤ë¥˜ í™•ì¸

---

## ğŸ“‹ í•µì‹¬ í™•ì¸ ì‚¬í•­

1. âœ… `schemas.py`: `QuestionCreate` ìŠ¤í‚¤ë§ˆ ì¡´ì¬
2. âœ… `schemas.py`: `subject`ì™€ `content`ì— `Field(..., min_length=1)` ì„¤ì •
3. âœ… `question_router.py`: `question_create()` ë©”ì†Œë“œ ì¡´ì¬
4. âœ… `question_router.py`: POST ë©”ì†Œë“œ ì‚¬ìš©
5. âœ… `question_router.py`: `Depends(get_db)` ì‚¬ìš©
6. âœ… `question_router.py`: ORMì„ ì‚¬ìš©í•˜ì—¬ ë°ì´í„° ì €ì¥
7. âœ… API ì •ìƒ ì‘ë™: http://localhost:8000/docs
8. âœ… í”„ë¡ íŠ¸ì—”ë“œ ì •ìƒ ì‘ë™: http://localhost:8080

---

## âš¡ ë¹ ë¥¸ ëª…ë ¹ì–´ ëª¨ìŒ

```bash
# ì„œë²„ ì‹¤í–‰
cd week14 && source venv/bin/activate && uvicorn main:app --reload

# í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰ (ìƒˆ í„°ë¯¸ë„)
cd week14/frontend && python3 -m http.server 8080

# API í…ŒìŠ¤íŠ¸ - ì§ˆë¬¸ ë“±ë¡
curl -X POST http://localhost:8000/api/question/ \
  -H "Content-Type: application/json" \
  -d '{"subject": "í…ŒìŠ¤íŠ¸", "content": "ë‚´ìš©"}' | python3 -m json.tool

# API í…ŒìŠ¤íŠ¸ - ì§ˆë¬¸ ëª©ë¡
curl http://localhost:8000/api/question/ | python3 -m json.tool
```

---

## ğŸŒ ì ‘ì† URL

-   **API ì„œë²„**: http://localhost:8000
-   **API ë¬¸ì„œ (Swagger)**: http://localhost:8000/docs
-   **API ë¬¸ì„œ (ReDoc)**: http://localhost:8000/redoc
-   **í”„ë¡ íŠ¸ì—”ë“œ (FastAPI)**: http://localhost:8000/static/index.html
-   **í”„ë¡ íŠ¸ì—”ë“œ (Python HTTP ì„œë²„)**: http://localhost:8080

---

## ğŸ” ë¬¸ì œ í•´ê²°

### CORS ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ê²½ìš°

í”„ë¡ íŠ¸ì—”ë“œì—ì„œ API í˜¸ì¶œ ì‹œ CORS ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´, `main.py`ì— CORS ë¯¸ë“¤ì›¨ì–´ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤:

```python
from fastapi.middleware.cors import CORSMiddleware

app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

### í”„ë¡ íŠ¸ì—”ë“œì—ì„œ APIë¥¼ í˜¸ì¶œí•  ìˆ˜ ì—†ëŠ” ê²½ìš°

1. ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸: `curl http://localhost:8000/`
2. ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ ì˜¤ë¥˜ ë©”ì‹œì§€ í™•ì¸ (F12)
3. ë„¤íŠ¸ì›Œí¬ íƒ­ì—ì„œ ìš”ì²­ ìƒíƒœ í™•ì¸
